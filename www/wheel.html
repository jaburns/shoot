<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin:0;
            padding:0;
            background-color: #222;
            text-align: center;
        }
        #paper {
            background-color: black;
        }
    </style>
</head>
<body>
    <canvas id="paper" width="600" height="50"></canvas>
</body>
<script>

    function makeWheel (color1, color2) {
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        canvas.width = 32;
        canvas.height = 32;
        ctx.beginPath();
        ctx.arc(16, 16, 15, 0, Math.PI, false);
        ctx.closePath();
        ctx.fillStyle = color1;
        ctx.fill();
        ctx.beginPath();
        ctx.arc(16, 16, 15, Math.PI, 0, false);
        ctx.closePath();
        ctx.fillStyle = color2;
        ctx.fill();
        return function (ctx, x, y, theta) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(theta);
            ctx.drawImage(canvas, -16, -16);
            ctx.restore();
        }
    }

    function makeSeat (color) {
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        canvas.width = 30;
        canvas.height = 29;
        ctx.lineWidth=7;
        ctx.lineCap='round';
        ctx.strokeStyle='#3996E8';
        ctx.beginPath();
        ctx.moveTo(15,25);
        ctx.lineTo(15,5);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(15-11,4);
        ctx.lineTo(15+11,4);
        ctx.stroke();
        return function (ctx, x, y, theta) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(theta);
            ctx.drawImage(canvas, -15, -25);
            ctx.restore();
        }
    }

    var canvas = document.getElementById('paper');
    var ctx = canvas.getContext('2d');

    var drawWheel = makeWheel ('#C13FFF', '#7F3FFF');
    var drawSeat = makeSeat ('#3996E8');

    var keys = {};
    window.onkeydown = function(e){keys[e.keyCode]=true}
    window.onkeyup = function(e){delete keys[e.keyCode]}

    var px = 300;
    var vx = 0;
    var seatRotTarget = 0;
    var seatRot = 0;
    var wheelRot = Math.PI / 4;

    function loop () {
        if (keys [65]) {
            vx -= 0.2;
            seatRotTarget = -Math.PI / 8;
        } else if (keys [68]) {
            vx += 0.2;
            seatRotTarget = Math.PI / 8;
        } else {
            vx *= 0.98;
            seatRotTarget = 0;
        }

        seatRot += (seatRotTarget - seatRot) / 10;
        px += vx;
        wheelRot += vx / 15;

        if (px < 15) {
            px = 15;
            vx = 0;
        }
        if (px > 600 - 15) {
            px = 600-15;
            vx = 0;
        }

        canvas.width = canvas.width;
        drawWheel (ctx, px, 35, wheelRot);
        drawSeat (ctx, px, 35, seatRot);
        requestAnimationFrame (loop);
    }
    requestAnimationFrame (loop);
</script>
</html>
